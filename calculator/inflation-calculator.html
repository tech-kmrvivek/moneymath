<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inflation Calculator | RupeesWise</title>
  <meta name="description" content="Calculate the future value of money and see how inflation impacts your purchasing power over time with our simple and intuitive calculator.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/jpeg" href="/assets/images/fevicon.JPG"> <!-- Favicon added here -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .font-montserrat { font-family: 'Montserrat', sans-serif; }
    /* Custom styles for range sliders */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      background: #d1fae5; /* emerald-100 */
      border-radius: 5px;
      outline: none;
      opacity: 0.7;
      transition: opacity .2s;
    }
    input[type="range"]:hover {
      opacity: 1;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: #10b981; /* emerald-500 */
      cursor: pointer;
      border-radius: 50%;
      border: 2px solid white;
    }
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #10b981; /* emerald-500 */
      cursor: pointer;
      border-radius: 50%;
      border: 2px solid white;
    }
  </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen flex flex-col">

  <!-- Placeholder for the Navigation Bar -->
  <div id="include-nav"></div>

  <!-- Main Content -->
  <main class="flex-1 w-full max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
    <div class="flex flex-col lg:flex-row gap-8">

      <!-- Left Side: Calculator Inputs -->
      <section class="w-full lg:w-1/3 bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg space-y-6">
        <h2 class="text-2xl font-bold text-emerald-700 dark:text-emerald-400 font-montserrat">Inflation Calculator</h2>
        
        <div>
          <label for="costInput" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Today's Cost</label>
          <div class="mt-1 flex rounded-md shadow-sm">
            <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 text-sm">₹</span>
            <input id="costInput" type="number" value="100000" class="flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white">
          </div>
          <input id="costSlider" type="range" min="1000" max="10000000" step="1000" value="100000" class="w-full mt-2">
          <div id="costWords" class="text-right text-xs italic text-gray-500 dark:text-gray-400 mt-1"></div>
        </div>

        <div>
          <label for="yearsInput" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Number of Years</label>
          <input id="yearsInput" type="number" value="10" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white">
          <input id="yearsSlider" type="range" min="1" max="50" step="1" value="10" class="w-full mt-2">
        </div>

        <div>
          <label for="inflationRateInput" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Expected Annual Inflation Rate (%)</label>
          <input id="inflationRateInput" type="number" value="6" step="0.5" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white">
          <input id="inflationRateSlider" type="range" min="1" max="15" step="0.5" value="6" class="w-full mt-2">
        </div>
      </section>

      <!-- Right Side: Results & Table -->
      <section class="w-full lg:w-2/3 space-y-8">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg">
          <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Inflation Projection</h3>
          <div id="resultSummary" class="text-center text-gray-700 dark:text-gray-300">
             <!-- Result summary will be generated here -->
          </div>
        </div>
        
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Yearly Cost Projection</h3>
            <div id="projectionTableContainer" class="max-h-96 overflow-y-auto">
                <!-- Table will be generated here -->
            </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Placeholder for the Footer -->
  <div id="include-footer"></div>

  <script>
    // --- DOM Elements ---
    const costInput = document.getElementById('costInput');
    const costSlider = document.getElementById('costSlider');
    const costWords = document.getElementById('costWords');
    const yearsInput = document.getElementById('yearsInput');
    const yearsSlider = document.getElementById('yearsSlider');
    const inflationRateInput = document.getElementById('inflationRateInput');
    const inflationRateSlider = document.getElementById('inflationRateSlider');
    const projectionTableContainer = document.getElementById('projectionTableContainer');
    const resultSummaryEl = document.getElementById('resultSummary');

    // --- Utility Functions ---
    function formatINR(num) {
      if (num >= 10000000) return `₹${(num / 10000000).toFixed(2)} Cr`;
      if (num >= 100000) return `₹${(num / 100000).toFixed(2)} L`;
      return `₹${num.toLocaleString('en-IN')}`;
    }
    
    function numberToWords(num) {
        const a = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
        const b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
        const numStr = num.toString();
        if (num < 0) return 'minus ' + numberToWords(-num);
        if (num === 0) return 'zero';
        if (num < 20) return a[num];
        if (numStr.length === 2) return b[numStr[0]] + (numStr[1] === '0' ? '' : ' ' + a[numStr[1]]);
        if (numStr.length === 3) return a[numStr[0]] + ' hundred' + (num % 100 === 0 ? '' : ' and ' + numberToWords(num % 100));
        if (numStr.length === 4 || numStr.length === 5) return numberToWords(Math.floor(num / 1000)) + ' thousand' + (num % 1000 !== 0 ? ' ' + numberToWords(num % 1000) : '');
        if (numStr.length === 6 || numStr.length === 7) return numberToWords(Math.floor(num / 100000)) + ' lakh' + (num % 100000 !== 0 ? ' ' + numberToWords(num % 100000) : '');
        if (numStr.length > 7) return numberToWords(Math.floor(num / 10000000)) + ' crore' + (num % 10000000 !== 0 ? ' ' + numberToWords(num % 10000000) : '');
        return '';
    }

    // --- Calculation Logic ---
    function calculateInflation() {
      const presentCost = parseFloat(costInput.value) || 0;
      const years = parseInt(yearsInput.value) || 0;
      const inflationRate = parseFloat(inflationRateInput.value) / 100 || 0;
      
      const futureCost = presentCost * Math.pow(1 + inflationRate, years);

      const projection = [];
      for (let y = 1; y <= years; y++) {
        const yearEndCost = presentCost * Math.pow(1 + inflationRate, y);
        projection.push({
          year: y,
          value: yearEndCost
        });
      }

      // --- Update UI ---
      costWords.textContent = numberToWords(presentCost).split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ') + ' Rupees';
      
      resultSummaryEl.innerHTML = `
        <p class="text-lg">An item costing <strong class="text-blue-600 dark:text-blue-400">${formatINR(presentCost)}</strong> today</p>
        <p class="text-lg">will cost approximately</p>
        <p class="text-4xl font-bold text-emerald-600 dark:text-emerald-400 my-2">${formatINR(futureCost)}</p>
        <p class="text-lg">in <strong class="text-yellow-600 dark:text-yellow-400">${years}</strong> years.</p>
      `;
      
      renderProjectionTable(projection);
    }

    // --- Table Rendering ---
    function renderProjectionTable(projection) {
        let tableHTML = `
            <table class="min-w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3">Year</th>
                        <th scope="col" class="px-6 py-3">Future Cost</th>
                    </tr>
                </thead>
                <tbody>
        `;
        projection.forEach(item => {
            tableHTML += `
                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">${item.year}</td>
                    <td class="px-6 py-4 font-semibold text-emerald-600 dark:text-emerald-400">${formatINR(item.value)}</td>
                </tr>
            `;
        });
        tableHTML += `</tbody></table>`;
        projectionTableContainer.innerHTML = tableHTML;
    }

    // --- Event Listeners and Initializer ---
    async function loadPartial(id, file) {
      try {
        const response = await fetch(file);
        if (!response.ok) throw new Error(`Failed to load ${file}: ${response.status}`);
        const text = await response.text();
        const element = document.getElementById(id);
        if (element) {
          element.innerHTML = text;
          Array.from(element.querySelectorAll("script")).forEach(oldScript => {
            const newScript = document.createElement("script");
            Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
            newScript.appendChild(document.createTextNode(oldScript.innerHTML));
            oldScript.parentNode.replaceChild(newScript, oldScript);
          });
        }
      } catch (error) {
        console.error(`Error loading partial: ${error}`);
      }
    }
    
    function setupEventListeners() {
      // Corrected, more explicit event handling
      costSlider.addEventListener('input', () => {
        costInput.value = costSlider.value;
        calculateInflation();
      });
      costInput.addEventListener('input', () => {
        costSlider.value = costInput.value;
        calculateInflation();
      });

      yearsSlider.addEventListener('input', () => {
        yearsInput.value = yearsSlider.value;
        calculateInflation();
      });
      yearsInput.addEventListener('input', () => {
        yearsSlider.value = yearsInput.value;
        calculateInflation();
      });

      inflationRateSlider.addEventListener('input', () => {
        inflationRateInput.value = inflationRateSlider.value;
        calculateInflation();
      });
      inflationRateInput.addEventListener('input', () => {
        inflationRateSlider.value = inflationRateInput.value;
        calculateInflation();
      });
    }
    
    document.addEventListener('DOMContentLoaded', async () => {
      await Promise.all([
        loadPartial("include-nav", "../components/nav.html"),
        loadPartial("include-footer", "../components/footer.html")
      ]);
      setupEventListeners();
      calculateInflation(); // Initial calculation
    });
  </script>
</body>
</html>
